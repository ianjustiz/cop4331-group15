<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contacts Page</title>
    <link href="css/contacts.css" rel="stylesheet">
    <script type="text/javascript" src="js/md5.js"></script>
    <script type="text/javascript" src="js/code.js"></script>
    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href='https://fonts.googleapis.com/css?family=Bruno Ace SC' rel='stylesheet'>

</head>

<body>

    <!-- Sidebar -->
    <div class="sidebar">
        <label for="loginName" style="padding-top: 20px;">
            <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" style="fill: rgb(255, 255, 255);transform: ;msFilter:;"><path d="M12 2A10.13 10.13 0 0 0 2 12a10 10 0 0 0 4 7.92V20h.1a9.7 9.7 0 0 0 11.8 0h.1v-.08A10 10 0 0 0 22 12 10.13 10.13 0 0 0 12 2zM8.07 18.93A3 3 0 0 1 11 16.57h2a3 3 0 0 1 2.93 2.36 7.75 7.75 0 0 1-7.86 0zm9.54-1.29A5 5 0 0 0 13 14.57h-2a5 5 0 0 0-4.61 3.07A8 8 0 0 1 4 12a8.1 8.1 0 0 1 8-8 8.1 8.1 0 0 1 8 8 8 8 0 0 1-2.39 5.64z"></path><path d="M12 6a3.91 3.91 0 0 0-4 4 3.91 3.91 0 0 0 4 4 3.91 3.91 0 0 0 4-4 3.91 3.91 0 0 0-4-4zm0 6a1.91 1.91 0 0 1-2-2 1.91 1.91 0 0 1 2-2 1.91 1.91 0 0 1 2 2 1.91 1.91 0 0 1-2 2z"></path></svg>        </label>

        </label>

        <h4 class="sidebar-text font" style="font-size: 20px">Hello, <span class="font" style="font-size: 20px" id="userName"></span></h4>

        <ul class="nav flex-column">
            <li class="nav-item">
                <button type="button" id="logoutButton" onclick="doLogout();"> 
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgb(255, 255, 255);transform: ;msFilter:;"><path d="M16 13v-2H7V8l-5 4 5 4v-3z"></path><path d="M20 3h-9c-1.103 0-2 .897-2 2v4h2V5h9v14h-9v-4H9v4c0 1.103.897 2 2 2h9c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2z"></path></svg>
                <span class="font" style="font-size: 15px;">Logout</span></button>
            </li>
            <li class="nav-item">
                <button type="button" id="contactsButton" onclick="toContacts()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgb(255, 255, 255);transform: ;msFilter:;"><path d="M21 2H6a2 2 0 0 0-2 2v3H2v2h2v2H2v2h2v2H2v2h2v3a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zm-8 2.999c1.648 0 3 1.351 3 3A3.012 3.012 0 0 1 13 11c-1.647 0-3-1.353-3-3.001 0-1.649 1.353-3 3-3zM19 18H7v-.75c0-2.219 2.705-4.5 6-4.5s6 2.281 6 4.5V18z"></path></svg>
                    <span class="font" style="font-size: 15px;">Contacts</span></button>
            </li>
            <li class="nav-item">
                <button type="button" id="aboutUsButton" onclick="toAboutUs()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgb(255, 255, 255);transform: ;msFilter:;"><path d="M16.604 11.048a5.67 5.67 0 0 0 .751-3.44c-.179-1.784-1.175-3.361-2.803-4.44l-1.105 1.666c1.119.742 1.8 1.799 1.918 2.974a3.693 3.693 0 0 1-1.072 2.986l-1.192 1.192 1.618.475C18.951 13.701 19 17.957 19 18h2c0-1.789-.956-5.285-4.396-6.952z"></path><path d="M9.5 12c2.206 0 4-1.794 4-4s-1.794-4-4-4-4 1.794-4 4 1.794 4 4 4zm0-6c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2zm1.5 7H8c-3.309 0-6 2.691-6 6v1h2v-1c0-2.206 1.794-4 4-4h3c2.206 0 4 1.794 4 4v1h2v-1c0-3.309-2.691-6-6-6z"></path></svg>
                    <span class="font" style="font-size: 15px;">About Us</span></button>
            </li>
        </ul>
    </div>

    <div class="content">
        <!-- Header, search, and Add Button --> 
        <div class="container">
            <h1 class="font" style="font-weight: 800;"> Manage Contacts</h1>
            <div class="d-flex">
                <div class="search">
                    <input type="text"  id="searchText" placeholder="Search Contacts" oninput="doSearch(true)">
                    <button type="button" id="searchBtn" onclick="showAllContacts();">
                        <svg id="refreshBtn" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: ;msFilter:;">
                            <path d="M10 11H7.101l.001-.009a4.956 4.956 0 0 1 .752-1.787 5.054 5.054 0 0 1 2.2-1.811c.302-.128.617-.226.938-.291a5.078 5.078 0 0 1 2.018 0 4.978 4.978 0 0 1 2.525 1.361l1.416-1.412a7.036 7.036 0 0 0-2.224-1.501 6.921 6.921 0 0 0-1.315-.408 7.079 7.079 0 0 0-2.819 0 6.94 6.94 0 0 0-1.316.409 7.04 7.04 0 0 0-3.08 2.534 6.978 6.978 0 0 0-1.054 2.505c-.028.135-.043.273-.063.41H2l4 4 4-4zm4 2h2.899l-.001.008a4.976 4.976 0 0 1-2.103 3.138 4.943 4.943 0 0 1-1.787.752 5.073 5.073 0 0 1-2.017 0 4.956 4.956 0 0 1-1.787-.752 5.072 5.072 0 0 1-.74-.61L7.05 16.95a7.032 7.032 0 0 0 2.225 1.5c.424.18.867.317 1.315.408a7.07 7.07 0 0 0 2.818 0 7.031 7.031 0 0 0 4.395-2.945 6.974 6.974 0 0 0 1.053-2.503c.027-.135.043-.273.063-.41H22l-4-4-4 4z">
                        </path></svg>
                    </button>
                    <span id="contactSearchResult"></span>
                </div>

                <div class="addContact">
                    <button type="button" id="addContactButton" class="buttons" href="javascript:void(0);"
                        onclick="showForm();"> <svg id = "aCB" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: ;msFilter:;"><path d="M19 8h-2v3h-3v2h3v3h2v-3h3v-2h-3zM4 8a3.91 3.91 0 0 0 4 4 3.91 3.91 0 0 0 4-4 3.91 3.91 0 0 0-4-4 3.91 3.91 0 0 0-4 4zm6 0a1.91 1.91 0 0 1-2 2 1.91 1.91 0 0 1-2-2 1.91 1.91 0 0 1 2-2 1.91 1.91 0 0 1 2 2zM4 18a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1h2v-1a5 5 0 0 0-5-5H7a5 5 0 0 0-5 5v1h2z"></path></svg> </button>
                </div>

                <div id="addContBox">

                    <div class="close-btn">
                        <svg cursor="pointer" class="x-icon" onclick="showForm()" width="25" height="25"
                            viewbox="0 0 40 40">
                            <path d="M 10,10 L 30,30 M 30,10 L 10,30" stroke="white" stroke-width="4" />
                        </svg>
                    </div>

                    <div class="form-floating mb-3 mt-3">
                        <input type="text" class="form-control" id="FName" placeholder="">
                        <label for="FN">First Name</label>
                    </div>

                    <div class="form-floating mb-3 mt-3">
                        <input type="text" class="form-control" id="LName" placeholder="">
                        <label for="LN">Last Name</label>
                    </div>

                    <div class="form-floating mb-3 mt-3">
                        <input type="text" class="form-control" id="email" placeholder="" name="email">
                        <label for="email">Email</label>
                    </div>

                    <div class="form-floating mt-3 mb-3">
                        <input type="text" class="form-control" id="phN" placeholder="">
                        <label for="phN">Phone Number</label>
                    </div>

                    <button type="button" id="addContButton" class="buttons" onclick="addContact();"> +Add Contact
                    </button>
                    <div class="pt-2">
                        <span id="contactAddResult"></span>
                    </div>
                </div>

            </div>
        </div>

        <div class="container pt-3">
            <div class="background-box"></div>

            <!-- Contacts Table -->
            <table class="table table-hover table-style">
                <thead class="font">
                    <tr>
                        <th scope="col">First Name</th>
                        <th scope="col">Last Name</th>
                        <th scope="col">Email</th>
                        <th scope="col">Phone</th>
                        <th scope="col">Manage Users</th>
                    </tr>
                </thead>
                <tbody id="searchResultTableBody" onscroll="scrollFunction()">
                    <!--Contacts population handled by script-->
                </tbody>
            </table>
        </div>
    </div>

</body>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        readCookie();
        showAllContacts();
        console.log("Contacts Page Loaded");
    }, false);

    dragElement(document.getElementById('addContBox'));

    function showForm() {
        var addContactBox = document.getElementById('addContBox');
        var contactTable = document.querySelector('.table-style');

        if (addContactBox.style.display === 'none' || addContactBox.style.display === '') {
            addContactBox.style.display = 'block';
           //  contactTable.classList.add('hidden');
        }
        else {
            addContactBox.style.display = 'none';
            // contactTable.classList.remove('hidden');

            let inputs = addContactBox.getElementsByTagName('input')
            for (let i = 0; i < inputs.length; i++) {
                inputs[i].value = '';
            }

            doSearch();
        }
    }
</script>

</html>
